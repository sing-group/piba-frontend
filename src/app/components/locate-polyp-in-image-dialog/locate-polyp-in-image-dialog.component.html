<!--
  ~  PIBA Frontend
  ~
  ~ Copyright (C) 2018-2020 - Miguel Reboiro-Jato,
  ~ Daniel Glez-Peña, Alba Nogueira Rodríguez, Florentino Fdez-Riverola,
  ~ Rubén Domínguez Carbajales, Jesús Miguel Herrero Rivas,
  ~ Eloy Sánchez Hernández, Laura Rivas Moral,
  ~ Manuel Puga Jiménez de Azcárate, Joaquín Cubiella Fernández,
  ~ Hugo López-Fernández, Silvia Rodríguez Iglesias, Fernando Campos Tato.
  ~
  ~  This program is free software: you can redistribute it and/or modify
  ~  it under the terms of the GNU General Public License as published by
  ~  the Free Software Foundation, either version 3 of the License, or
  ~  (at your option) any later version.
  ~
  ~  This program is distributed in the hope that it will be useful,
  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~  GNU General Public License for more details.
  ~
  ~  You should have received a copy of the GNU General Public License
  ~  along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<clr-modal [(clrModalOpen)]="open" [clrModalClosable]="false" clrModalSize="lg">
  <h3 class="modal-title">{{title}}</h3>
  <div class="modal-body">
    <app-image-annotator [src]="src" [(polypLocation)]="polypLocation"></app-image-annotator>
    <form class="clr-form clr-form-horizontal" *ngIf="showObservationAsForm()">
      <div class="clr-form-control clr-row">
        <label for="observation" class="clr-control-label clr-col-md-2">Observation</label>
        <div class="clr-control-container clr-col-md-10">
          <div class="clr-input-wrapper">
            <input id="observation" name="observation" type="text" class="clr-input"
                   [(ngModel)]="observation" [disabled]="disabledObservationField">
          </div>
        </div>
      </div>
    </form>
    <div class="clr-row" *ngIf="!showObservationAsForm() && hasObservation()">
      <div class="clr-col-md-12">
        {{observation}}
      </div>
    </div>
    <clr-alert clrAlertType="warning" [clrAlertClosable]="false" *ngIf="disabled">
      <clr-alert-item>
        <span class="alert-text">{{disabledMessage}}</span>
      </clr-alert-item>
    </clr-alert>
  </div>
  <div class="modal-footer" *ngIf="!disabled">
    <button type="button" class="btn btn-danger-outline" (click)="onDiscard()" [disabled]="!hasPolypLocation()">
      Discard Location
    </button>
    <button type="button" class="btn btn-outline" (click)="onCancel()">
      Cancel
    </button>
    <button type="button" class="btn btn-success-outline" (click)="onSave()">
      Save (s)
    </button>
  </div>
  <div class="modal-footer" *ngIf="disabled">
    <button type="button" class="btn btn-outline" (click)="onCancel()">
      Close
    </button>
  </div>
</clr-modal>
